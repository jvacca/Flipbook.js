this.Flipbook=this.Flipbook||{},function(){"use strict";function a(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function b(){return(new Date).getTime()}function c(a,c){return c.id=b(),c.name="",c.parent=null,c.mouseEnabled=a.mouseEnabled,c.x=a.x,c.y=a.y,c.regX=a.regX,c.regY=a.regY,c.width=a.width,c.height=a.height,c.definition=a.definition,c.scaleX=a.scaleX,c.scaleY=a.scaleY,c.skewX=a.skewX,c.skewY=a.skewY,c.rotation=a.rotation,c.alpha=a.alpha,c.mask=a.mask,c.bounds=a.bounds,c.visible=a.visible,c.onPressFunc=null,c.onHoverFunc=null,c.EventCollection={},c.uid=-1,c}Flipbook.VERSION=.5,Flipbook.buildDate="061815",Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b});window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(){console.log("Shit out of luck!")}}(),Flipbook.Events={Added:"added",Removed:"removed",MouseMove:"mouseMove",MouseClick:"mouseClick",OnUpdate:"onUpdate"},Flipbook.Config={useCreateJS:!0,useGreensock:!1,mouseEventsEnabled:!1},Flipbook.DisplayObject=function(){if(this.id=b(),this.name="",this.parent=null,this.mouseEnabled=null,this.x=0,this.y=0,this.regX=0,this.regY=0,this.width=0,this.height=0,this.definition=null,this.scaleX=1,this.scaleY=1,this.skewX=-1,this.skewY=-1,this.rotation=-1,this.alpha=-1,this.mask=null,this.bounds=null,this.mouseX=null,this.mouseY=null,this.visible=!0,this.onRelease=null,this.onRollOver=null,this.onRollOut=null,this.EventCollection={},this.uid=-1,Flipbook.Config.mouseEventsEnabled){var a=this;Flipbook.canvas.addEventListener("mousemove",function(b){var c=Flipbook.canvas.getBoundingClientRect();a.mouseX=b.clientX-c.left,a.mouseY=b.clientY-c.top,a.onMouseOver(),a.onMouseOut(),a.dispatchEvent(Flipbook.Events.MouseMove)}),Flipbook.canvas.addEventListener("click",function(b){a.onMouseClick()})}},a(Flipbook.DisplayObject.prototype,{applyProperties:function(){Flipbook.ctx.transform(this.scaleX,0,0,this.scaleY,this.x,this.y),-1!=this.alpha&&(Flipbook.ctx.globalAlpha=this.alpha),-1!==this.rotation&&Flipbook.ctx.rotate(this.rotation),(-1!==this.skewX||-1!==this.skewY)&&Flipbook.ctx.transform(1,this.skewX,this.skewY,1,0,0),(-1!==this.scaleX||-1!==this.scaleY||-1!==this.rotation||-1!==this.skewX||-1!==this.skewY)&&Flipbook.ctx.translate(this.regX,this.regY)},checkBounds:function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height?!0:!1},addEventListener:function(a,b){this.EventCollection.hasOwnProperty(a)||(this.EventCollection[a]=[]);var c=++this.uid,d={token:c,func:b};return this.EventCollection[a].push(d),c},removeEventListener:function(a,b){if(this.EventCollection.hasOwnProperty(a))for(var c=this.EventCollection[a],d=0;d<c.length;d++)c[d].func==b&&c.splice(d,1);return!1},dispatchEvent:function(a,b){if(!this.EventCollection.hasOwnProperty(a))return!1;for(var c=this.EventCollection[a],d=0;d<c.length;d++)c[d].func(a,b);return!0},onMouseClick:function(){null!==this.onRelease&&this.checkBounds(this.mouseX,this.mouseY)===!0&&this.onRelease()},onMouseOver:function(a){null!==this.onRollOver&&this.checkBounds(this.mouseX,this.mouseY)===!0&&this.onRollOver()},onMouseOut:function(a){null!==this.onRollOut&&this.checkBounds(this.mouseX,this.mouseY)!==!0&&this.onRollOut()},clone:function(){return c(new DisplayObject,this)},toString:function(){console.log("id = "+this.id+" name = "+this.name)}}),Flipbook.Bitmap=function(a,b,c){if(Flipbook.DisplayObject.call(this),this.args=arguments,"string"==typeof a){this.definition=document.createElement("img");var d=this;this.definition.onload=function(){(0===d.width||0===d.height)&&(d.args.length<=3?(d.width=b||d.definition.width,d.height=c||d.definition.height):(d.width=d.args[7],d.height=d.args[8]))},this.definition.src=a}else this.definition=a,this.args.length<=3?(this.width=b||this.definition.width,this.height=c||this.definition.height):(this.width=this.args[7],this.height=this.args[8])},Flipbook.Bitmap.prototype=Object.create(Flipbook.DisplayObject.prototype),Flipbook.Bitmap.prototype.constructor=Flipbook.Bitmap,a(Flipbook.Bitmap.prototype,{draw:function(){if(this.visible!==!1&&this.definition)if(this.mask)Flipbook.ctx.save(),this.mask.draw(Flipbook.ctx),Flipbook.ctx.clip(),Flipbook.ctx.drawImage(this.definition,0,0,this.width,this.height),Flipbook.ctx.restore();else if(this.args.length>3){var a=this.args[1],b=this.args[2],c=this.args[3],d=this.args[4];this.args[5],this.args[6];Flipbook.ctx.drawImage(this.definition,a,b,c,d,0,0,this.width,this.height)}else Flipbook.ctx.drawImage(this.definition,0,0,this.width,this.height)},clone:function(){return c(new Bitmap,this)}}),Flipbook.Container=function(){Flipbook.DisplayObject.call(this),this.displayList=[]},Flipbook.Container.prototype=Object.create(Flipbook.DisplayObject.prototype),Flipbook.Container.prototype.constructor=Flipbook.Container,a(Flipbook.Container.prototype,{addChild:function(a){for(var b=arguments.length,c=0;b>c;c++){var d=arguments[c];d.parent=this,this.displayList.push(d),this.dispatchEvent(Flipbook.Events.Added)}},getChildIndexById:function(a){var b;for(b=0;b<this.displayList.length;b++)if(this.displayList[b].id==a)return b;return!1},removeChild:function(a){var b=this.getChildIndexById(a.id);this.displayList.splice(b,1),this.dispatchEvent(Flipbook.Events.Removed)},removeAllChildren:function(){this.displayList.splice(0,this.displayList.length),this.dispatchEvent(Flipbook.Events.Removed)},getNumChildren:function(){return this.displayList.length},getChildByName:function(a){var b;for(b=0;b<this.displayList.length;b++)if(this.displayList[b].name==a)return this.displayList[b];return!1},swapChildren:function(a,b){var c=getChildIndexById(a.id),d=getChildIndexById(b.id);this.displayList[c]=b,this.displayList[d]=a},contains:function(a){return this.getChildIndexById(a.id)!==!1?!0:!1},draw:function(){if(this.visible!==!1){var a=0;for(a=0;a<this.displayList.length;a++)Flipbook.ctx.save(),this.displayList[a].applyProperties(),this.displayList[a].draw(Flipbook.ctx),Flipbook.ctx.restore()}},update:function(){this.dispatchEvent(Flipbook.Events.OnUpdate),Flipbook.ctx.setTransform(1,0,0,1,0,0),Flipbook.ctx.clearRect(0,0,Flipbook.canvas.width,Flipbook.canvas.height),this.draw()},clone:function(){return c(new Container,this)}}),Flipbook.Shape=function(a,b,c){Flipbook.DisplayObject.call(this),this.width=b||0,this.height=c||0,this.definition=a},Flipbook.Shape.prototype=Object.create(Flipbook.DisplayObject.prototype),Flipbook.Shape.prototype.constructor=Flipbook.Shape,a(Flipbook.Shape.prototype,{draw:function(){this.visible!==!1&&(this.mask?(Flipbook.ctx.save(),this.mask.draw(Flipbook.ctx),Flipbook.ctx.clip(),this.definition&&this.definition.draw(Flipbook.ctx),Flipbook.ctx.restore()):this.definition&&this.definition.draw(Flipbook.ctx))},clone:function(){return c(new Shape,this)}}),Flipbook.SpriteSheet=function(a){Flipbook.DisplayObject.call(this),this.data=a,this.currentFrame=0,this.totalFrames=this.data.frames.length,this.paused=!1,this.loop=!1,this.definition=document.createElement("img");var b=this;this.definition.onload=function(){b.width=b.data.frames[0][2],b.height=b.data.frames[0][3]},this.definition.src=this.data.images[0]},Flipbook.SpriteSheet.prototype=Object.create(Flipbook.DisplayObject.prototype),Flipbook.SpriteSheet.prototype.constructor=Flipbook.SpriteSheet,a(Flipbook.SpriteSheet.prototype,{draw:function(){if(this.visible!==!1&&this.definition){var a;a=this.currentFrame<this.totalFrames&&this.paused!==!0?this.currentFrame++:this.loop===!0?0:this.totalFrames-1;var b=this.data.frames[a],c=b[0],d=b[1],e=b[2],f=b[3];Flipbook.ctx.drawImage(this.definition,c,d,e,f,0,0,this.width,this.height)}},play:function(){this.paused=!1},stop:function(){this.paused=!0},gotoAndPlay:function(a){a>0&&a<this.totalFrames&&(currentFrame=a,this.paused=!1)},gotoAndStop:function(a){a>0&&a<this.totalFrames&&(currentFrame=a,this.paused=!0)},advance:function(){this.currentFrame+1<this.totalFrames&&this.currentFrame++},clone:function(){return c(new SpriteSheet,this)}}),Flipbook.Textfield=function(a,b,c){this.text=a,this.font=b.font||"Arial",this.size=b.size||"12 pt",this.align=b.align||"start",this.style=b.style||"normal",this.color=c||"black"},Flipbook.Textfield.prototype=Object.create(Flipbook.DisplayObject.prototype),Flipbook.Textfield.prototype.constructor=Flipbook.Textfield,a(Flipbook.Textfield.prototype,{draw:function(){if(this.visible!==!1){this.definition?this.definition.draw(Flipbook.ctx):(Flipbook.ctx.font=this.style+" "+this.size+" "+this.font,Flipbook.ctx.textAlign=this.align,Flipbook.ctx.fillStyle=this.color,Flipbook.ctx.fillText(this.text,this.x,this.y));var a=Flipbook.ctx.measureText(this.text);this.width=a.width,this.height=this.size}},clone:function(){return c(new Textfield,this)}}),Flipbook.Main=function(a){function b(a){if(Flipbook.canvas=document.getElementById(a),Flipbook.ctx=Flipbook.canvas.getContext("2d"),Flipbook.stageObj=new Flipbook.Container(a),Flipbook.stageObj.name="stage",Flipbook.Config.useCreateJS)createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",function(){Flipbook.stageObj.update()});else if(Flipbook.Config.useGreensock)TweenLite.ticker.addEventListener("tick",function(){Flipbook.stageObj.update()});else{var b=function(){Flipbook.stageObj.update(),window.requestAnimFrame(b)};b()}}return{initialize:function(a){b(a)}}}()}();