!function(t){"use strict";function i(t,i){var e;for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}function e(){return(new Date).getTime()}function s(t,i){return i.id=e(),i.name="",i.parent=null,i.mouseEnabled=t.mouseEnabled,i.x=t.x,i.y=t.y,i.regX=t.regX,i.regY=t.regY,i.width=t.width,i.height=t.height,i.definition=t.definition,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.skewX=t.skewX,i.skewY=t.skewY,i.rotation=t.rotation,i.alpha=t.alpha,i.mask=t.mask,i.bounds=t.bounds,i.visible=t.visible,i.onPressFunc=null,i.onHoverFunc=null,i.EventCollection={},i.uid=-1,i}Object.create||(Object.create=function(t){function i(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return i.prototype=t,new i});t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){return t.setTimeout(i,1e3/60)}}(),t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||function(){console.log("Shit out of luck!")}}();var n={};n.VERSION=.5,n.Config={useCreateJS:!0,useGreensock:!1,mouseEventsEnabled:!1},n.Events={Added:"added",Removed:"removed",MouseMove:"mouseMove",MouseClick:"mouseClick",OnUpdate:"onUpdate"},n.DisplayObject=function(){if(this.id=e(),this.name="",this.parent=null,this.mouseEnabled=null,this.x=0,this.y=0,this.regX=0,this.regY=0,this.width=0,this.height=0,this.definition=null,this.scaleX=1,this.scaleY=1,this.skewX=-1,this.skewY=-1,this.rotation=-1,this.alpha=-1,this.mask=null,this.bounds=null,this.mouseX=null,this.mouseY=null,this.visible=!0,this.onRelease=null,this.onRollOver=null,this.onRollOut=null,this.EventCollection={},this.uid=-1,n.Config.mouseEventsEnabled){var t=this;n.canvas.addEventListener("mousemove",function(i){var e=n.canvas.getBoundingClientRect();t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t.onMouseOver(),t.onMouseOut(),t.dispatchEvent(n.Events.MouseMove)}),n.canvas.addEventListener("click",function(){t.onMouseClick()})}},i(n.DisplayObject.prototype,{applyProperties:function(){n.ctx.transform(this.scaleX,0,0,this.scaleY,this.x,this.y),-1!=this.alpha&&(n.ctx.globalAlpha=this.alpha),-1!==this.rotation&&n.ctx.rotate(this.rotation),(-1!==this.skewX||-1!==this.skewY)&&n.ctx.transform(1,this.skewX,this.skewY,1,0,0),(-1!==this.scaleX||-1!==this.scaleY||-1!==this.rotation||-1!==this.skewX||-1!==this.skewY)&&n.ctx.translate(this.regX,this.regY)},checkBounds:function(t,i){return t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height?!0:!1},addEventListener:function(t,i){this.EventCollection.hasOwnProperty(t)||(this.EventCollection[t]=[]);var e=++this.uid,s={token:e,func:i};return this.EventCollection[t].push(s),e},removeEventListener:function(t,i){if(this.EventCollection.hasOwnProperty(t))for(var e=this.EventCollection[t],s=0;s<e.length;s++)e[s].func==i&&e.splice(s,1);return!1},dispatchEvent:function(t,i){if(!this.EventCollection.hasOwnProperty(t))return!1;for(var e=this.EventCollection[t],s=0;s<e.length;s++)e[s].func(t,i);return!0},onMouseClick:function(){null!==this.onRelease&&this.checkBounds(this.mouseX,this.mouseY)===!0&&this.onRelease()},onMouseOver:function(){null!==this.onRollOver&&this.checkBounds(this.mouseX,this.mouseY)===!0&&this.onRollOver()},onMouseOut:function(){null!==this.onRollOut&&this.checkBounds(this.mouseX,this.mouseY)!==!0&&this.onRollOut()},clone:function(){return s(new DisplayObject,this)},toString:function(){console.log("id = "+this.id+" name = "+this.name)}}),n.Container=function(){n.DisplayObject.call(this),this.displayList=[]},n.Container.prototype=Object.create(n.DisplayObject.prototype),n.Container.prototype.constructor=n.DisplayObject,i(n.Container.prototype,{addChild:function(){for(var t=arguments.length,i=0;t>i;i++){var e=arguments[i];e.parent=this,this.displayList.push(e),this.dispatchEvent(n.Events.Added)}},getChildIndexById:function(t){var i;for(i=0;i<this.displayList.length;i++)if(this.displayList[i].id==t)return i;return!1},removeChild:function(t){var i=this.getChildIndexById(t.id);this.displayList.splice(i,1),this.dispatchEvent(n.Events.Removed)},removeAllChildren:function(){this.displayList.splice(0,this.displayList.length),this.dispatchEvent(n.Events.Removed)},getNumChildren:function(){return this.displayList.length},getChildByName:function(t){var i;for(i=0;i<this.displayList.length;i++)if(this.displayList[i].name==t)return this.displayList[i];return!1},swapChildren:function(t,i){var e=getChildIndexById(t.id),s=getChildIndexById(i.id);this.displayList[e]=i,this.displayList[s]=t},contains:function(t){return this.getChildIndexById(t.id)!==!1?!0:!1},draw:function(){if(this.visible!==!1){var t=0;for(t=0;t<this.displayList.length;t++)n.ctx.save(),this.displayList[t].applyProperties(),this.displayList[t].draw(n.ctx),n.ctx.restore()}},update:function(){this.dispatchEvent(n.Events.OnUpdate),n.ctx.setTransform(1,0,0,1,0,0),n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),this.draw()},clone:function(){return s(new Container,this)}}),n.Shape=function(t,i,e){n.DisplayObject.call(this),this.width=i||0,this.height=e||0,this.definition=t},n.Shape.prototype=Object.create(n.DisplayObject.prototype),n.Shape.prototype.constructor=n.DisplayObject,i(n.Shape.prototype,{draw:function(){this.visible!==!1&&(this.mask?(n.ctx.save(),this.mask.draw(n.ctx),n.ctx.clip(),this.definition&&this.definition.draw(n.ctx),n.ctx.restore()):this.definition&&this.definition.draw(n.ctx))},clone:function(){return s(new Shape,this)}}),n.Bitmap=function(t,i,e){if(n.DisplayObject.call(this),this.args=arguments,"string"==typeof t){this.definition=document.createElement("img");var s=this;this.definition.onload=function(){(0===s.width||0===s.height)&&(s.args.length<=3?(s.width=i||s.definition.width,s.height=e||s.definition.height):(s.width=s.args[7],s.height=s.args[8]))},this.definition.src=t}else this.definition=t,this.args.length<=3?(this.width=i||this.definition.width,this.height=e||this.definition.height):(this.width=this.args[7],this.height=this.args[8])},n.Bitmap.prototype=Object.create(n.DisplayObject.prototype),n.Bitmap.prototype.constructor=n.DisplayObject,i(n.Bitmap.prototype,{draw:function(){if(this.visible!==!1&&this.definition)if(this.mask)n.ctx.save(),this.mask.draw(n.ctx),n.ctx.clip(),n.ctx.drawImage(this.definition,0,0,this.width,this.height),n.ctx.restore();else if(this.args.length>3){{var t=this.args[1],i=this.args[2],e=this.args[3],s=this.args[4];this.args[5],this.args[6]}n.ctx.drawImage(this.definition,t,i,e,s,0,0,this.width,this.height)}else n.ctx.drawImage(this.definition,0,0,this.width,this.height)},clone:function(){return s(new Bitmap,this)}}),n.SpriteSheet=function(t){n.DisplayObject.call(this),this.data=t,this.currentFrame=0,this.totalFrames=this.data.frames.length,this.paused=!1,this.loop=!1,this.definition=document.createElement("img");var i=this;this.definition.onload=function(){i.width=i.data.frames[0][2],i.height=i.data.frames[0][3]},this.definition.src=this.data.images[0]},n.SpriteSheet.prototype=Object.create(n.DisplayObject.prototype),n.SpriteSheet.prototype.constructor=n.DisplayObject,i(n.SpriteSheet.prototype,{draw:function(){if(this.visible!==!1&&this.definition){var t;t=this.currentFrame<this.totalFrames&&this.paused!==!0?this.currentFrame++:this.loop===!0?0:this.totalFrames-1;var i=this.data.frames[t],e=i[0],s=i[1],o=i[2],h=i[3];n.ctx.drawImage(this.definition,e,s,o,h,0,0,this.width,this.height)}},play:function(){this.paused=!1},stop:function(){this.paused=!0},gotoAndPlay:function(t){t>0&&t<this.totalFrames&&(currentFrame=t,this.paused=!1)},gotoAndStop:function(t){t>0&&t<this.totalFrames&&(currentFrame=t,this.paused=!0)},advance:function(){this.currentFrame+1<this.totalFrames&&this.currentFrame++},clone:function(){return s(new SpriteSheet,this)}}),n.Textfield=function(t,i,e){this.text=t,this.font=i.font||"Arial",this.size=i.size||"12 pt",this.align=i.align||"start",this.style=i.style||"normal",this.color=e||"black"},n.Textfield.prototype=Object.create(n.DisplayObject.prototype),n.Textfield.prototype.constructor=n.DisplayObject,i(n.Textfield.prototype,{draw:function(){if(this.visible!==!1){this.definition?this.definition.draw(n.ctx):(n.ctx.font=this.style+" "+this.size+" "+this.font,n.ctx.textAlign=this.align,n.ctx.fillStyle=this.color,n.ctx.fillText(this.text,this.x,this.y));var t=n.ctx.measureText(this.text);this.width=t.width,this.height=this.size}},clone:function(){return s(new Textfield,this)}}),n.Controller=function(){function i(i){if(n.canvas=document.getElementById(i),n.ctx=n.canvas.getContext("2d"),n.stageObj=new n.Container(i),n.stageObj.name="stage",n.Config.useCreateJS)createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",function(){n.stageObj.update()});else if(n.Config.useGreensock)TweenLite.ticker.addEventListener("tick",function(){n.stageObj.update()});else{var e=function(){n.stageObj.update(),t.requestAnimFrame(e)};e()}}return{initialize:function(t){i(t)}}}(),t.Flipbook=n}(this);